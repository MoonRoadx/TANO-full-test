<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <meta name="description" content="Sistema di tracciamento interventi meccanici - Tano Evoluzione"/>
  <title>Tano Evoluzione - Sistema NFC v1.8</title>

  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.31/jspdf.plugin.autotable.min.js"></script>

  <style>
    html, body { height: 100%; margin: 0; }
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: url('Background.png') no-repeat center center fixed;
      background-size: cover;
      color: white;
      min-height: 100vh;
      opacity: 0;
      animation: fadeIn 1s ease-in-out forwards;
    }
    body::before {
      content: "";
      position: fixed;
      inset: 0;
      background: linear-gradient(135deg, rgba(0,0,0,0.85) 0%, rgba(0,0,0,0.65) 50%, rgba(0,0,0,0.85) 100%);
      backdrop-filter: blur(2px);
      z-index: -1;
    }
    #app { background: rgba(0,0,0,0.45); min-height: 100vh; padding-bottom: 50px; }
    .bg-white {
      background-color: rgba(30,30,35,0.88) !important;
      backdrop-filter: blur(12px) saturate(120%);
      border: 1px solid rgba(255,255,255,0.15);
      box-shadow: 0 8px 32px rgba(0,0,0,0.5);
      transition: all 0.4s ease;
    }
    .bg-white p, .bg-white span, .bg-white h2, .bg-white h3 { color: #e5e7eb !important; }
    .text-gray-600, .text-gray-500, .text-gray-700 { color: #d1d5db !important; }
    .text-blue-600 { color: #60a5fa !important; }
    input, textarea, select {
      color: #f3f4f6 !important;
      background-color: rgba(45,45,50,0.95) !important;
      border: 2px solid rgba(75,85,99,0.8) !important;
    }
    input::placeholder, textarea::placeholder { color: #9ca3af !important; }
    input:focus, textarea:focus, select:focus {
      outline: none; box-shadow: 0 0 0 4px rgba(59,130,246,0.3); border-color: #3b82f6 !important;
    }
    @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
    .animate-pulse { animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite; }
    .notification {
      position: fixed; top: 20px; right: 20px; padding: 16px 24px; border-radius: 8px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.3); z-index: 1000; animation: slideIn 0.3s ease-out;
    }
    @keyframes slideIn { from { transform: translateX(400px); opacity: 0; } to { transform: translateX(0); opacity: 1; } }
    .modal { position: fixed; inset: 0; background: rgba(0,0,0,0.8); display: flex; align-items: center; justify-content: center; z-index: 2000; padding: 20px; }
    .modal-content { background: rgba(30,30,35,0.95); border-radius: 12px; padding: 24px; max-width: 500px; width: 100%; border: 1px solid rgba(255,255,255,0.15); }
    #qrcode { display: flex; justify-content: center; padding: 20px; background: white; border-radius: 8px; margin: 16px 0; }
    .loading {
      display: inline-block; width: 20px; height: 20px; border: 3px solid rgba(255,255,255,.3);
      border-radius: 50%; border-top-color: #fff; animation: spin 1s ease-in-out infinite;
    }
    @keyframes spin { to { transform: rotate(360deg); } }
    .pdf-button {
      background: linear-gradient(135deg, #dc2626 0%, #991b1b 100%);
      transition: all 0.3s ease;
    }
    .pdf-button:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(220, 38, 38, 0.4);
    }
    .offline-indicator {
      position: fixed; bottom: 20px; left: 20px; padding: 12px 20px; background: rgba(245, 158, 11, 0.9);
      color: white; border-radius: 8px; font-weight: bold; z-index: 1001; animation: slideUp 0.3s ease-out;
    }
    @keyframes slideUp { from { transform: translateY(100px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
    .tag {
      display: inline-block; padding: 4px 8px; border-radius: 4px; font-size: 11px; font-weight: bold; margin-right: 5px; margin-bottom: 5px;
    }
    .tag-urgent { background: #dc2626; color: white; }
    .tag-warranty { background: #059669; color: white; }
    .tag-recurring { background: #2563eb; color: white; }
    .tag-parts { background: #7c3aed; color: white; }
  </style>
</head>
<body>
  <div id="app">
    <div class="min-h-screen flex items-center justify-center">
      <div class="bg-white rounded-lg shadow-lg p-8 max-w-md w-full text-center">
        <div class="loading mx-auto mb-4"></div>
        <p class="text-gray-300">Caricamento Firebase...</p>
      </div>
    </div>
  </div>

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.14.0/firebase-app.js";
    import { getAuth, signInAnonymously, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/10.14.0/firebase-auth.js";
    import { getFirestore, enableIndexedDbPersistence, doc, setDoc, getDoc, onSnapshot, deleteDoc, collection } from "https://www.gstatic.com/firebasejs/10.14.0/firebase-firestore.js";

    const firebaseConfig = {
  apiKey: "AIzaSyAabc123def456ghi789jkl012mno345pqr678",
  authDomain: "tano-test-full.firebaseapp.com",
  projectId: "tano-test-full",
  storageBucket: "tano-test-full.appspot.com",
  messagingSenderId: "123456789012",
  appId: "1:123456789012:web:abcdef1234567890"
};


    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    const db = getFirestore(app);

    // Activer la persistance hors ligne
    try {
      await enableIndexedDbPersistence(db);
      console.log("âœ… Mode hors ligne activÃ©");
    } catch (err) {
      console.log("âš ï¸ Erreur persistance:", err.code);
    }

    window.firebaseDB = db;
    window.firebaseReady = true;
    console.log("âœ… Firebase initialized");

    // Variable pour stocker l'utilisateur actuel
    let user = null;

    // Connexion anonyme
    signInAnonymously(auth)
      .then(() => {
        console.log("Utilisateur connectÃ© anonymement");
      })
      .catch((error) => {
        console.error("Erreur de connexion : ", error);
      });

    // Ã‰couter les changements d'Ã©tat d'authentification
    onAuthStateChanged(auth, (currentUser) => {
      if (currentUser) {
        user = currentUser;
        console.log("Utilisateur connectÃ© : ", user.uid);
      } else {
        user = null;
        console.log("Aucun utilisateur connectÃ©");
      }
    });

    const MECHANIC_PIN = "1234";
    const USE_FIREBASE = true;

    const vehicleDatabase = {
      "Fiat": ["Panda", "500", "Punto", "Tipo", "DoblÃ²", "500L", "500X", "124 Spider", "Multipla", "Bravo", "Stilo", "Croma", "Freemont", "Barchetta", "Coupe", "Ulysse", "Sedici", "Idea", "Linea", "Ducato"],
      "Alfa Romeo": ["Giulia", "Stelvio", "Giulietta", "Mito", "159", "147", "156", "166", "Brera", "Spider", "GT", "GTV", "164", "155", "33", "Alfasud", "Alfetta", "Giulietta Spider"],
      "Lancia": ["Ypsilon", "Delta", "Musa", "Phedra", "Thesis", "Lybra", "Kappa", "Zeta", "Prisma", "Dedra", "Thema"],
      "BMW": ["Serie 1", "Serie 2", "Serie 3", "Serie 4", "Serie 5", "Serie 6", "Serie 7", "X1", "X2", "X3", "X4", "X5", "X6", "X7", "Z4", "M3", "M4", "M5", "i3", "i4", "iX"],
      "Mercedes": ["Classe A", "Classe B", "Classe C", "Classe E", "Classe S", "Classe G", "GLA", "GLB", "GLC", "GLE", "GLS", "SL", "SLK", "AMG GT", "EQA", "EQC", "EQS", "Vito", "Sprinter"],
      "Audi": ["A1", "A2", "A3", "A4", "A5", "A6", "A7", "A8", "Q2", "Q3", "Q4", "Q5", "Q7", "Q8", "TT", "R8", "e-tron"],
      "Volkswagen": ["Golf", "Passat", "Polo", "Tiguan", "Touareg", "T-Roc", "T-Cross", "Arteon", "Up!", "Beetle", "Jetta", "Scirocco", "Sharan", "Touran", "Transporter", "Caddy"],
      "Renault": ["Clio", "Captur", "MÃ©gane", "ScÃ©nic", "Kadjar", "Koleos", "Twingo", "Espace", "Laguna", "ZoÃ©", "Talisman", "Kangoo", "Trafic"],
      "Peugeot": ["208", "308", "508", "2008", "3008", "5008", "108", "408", "607", "807", "Expert", "Partner", "Boxer"],
      "CitroÃ«n": ["C3", "C4", "C5", "C1", "C2", "C6", "C8", "Berlingo", "Jumpy", "Jumper", "DS3", "DS4", "DS5"],
      "Opel": ["Corsa", "Astra", "Insignia", "Mokka", "Crossland", "Grandland", "Zafira", "Vivaro", "Movano", "GT", "Speedster"],
      "Ford": ["Fiesta", "Focus", "Mondeo", "Kuga", "Puma", "EcoSport", "Edge", "Galaxy", "S-Max", "Mustang", "Ranger", "Transit"],
      "Toyota": ["Yaris", "Corolla", "Camry", "RAV4", "C-HR", "Highlander", "Hilux", "Land Cruiser", "Supra", "Aygo", "Prius", "Mirai"],
      "Dacia": ["Sandero", "Duster", "Lodgy", "Dokker", "Logan", "Spring", "Jogger"],
      "Jeep": ["Renegade", "Compass", "Cherokee", "Grand Cherokee", "Wrangler", "Commander"],
      "Volvo": ["XC40", "XC60", "XC90", "S60", "S90", "V40", "V60", "V90", "C40", "EX90"]
    };

    const garageInfo = {
      name: "Tano Evoluzione - Bosch Car Service",
      address: "Via dello Stadio, 179, 00060 Sacrofano RM",
      phone: "3478511524",
      email: "tanosrls@gmail.com",
      vatNumber: "15390421004",
      website: "www.tanoevoluzione.it"
    };

    const translations = {
      it: { /* Vos traductions en italien */ },
      fr: { /* Vos traductions en franÃ§ais */ },
      en: { /* Vos traductions en anglais */ }
    };

    let currentLang = localStorage.getItem('app_language') || 'it';
    function t(key) { return translations[currentLang][key] || translations.it[key] || key; }
    function setLanguage(lang) { currentLang = lang; localStorage.setItem('app_language', lang); render(); }
    function getLanguageSelector() { /* Votre fonction */ }

    let vehicles = {}, currentVehicle = null, showAddForm = false, isMechanicMode = false, isClientMode = false;
    let showLoginScreen = true, searchQuery = '', showShareModal = false, shareModalTarga = null, realtimeUnsubscribe = null, showAppointmentForm = false;
    let showDashboard = false, showAdvancedSearch = false, filters = { date: '', type: '', mechanic: '', costMin: '', costMax: '' };
    let isOffline = !navigator.onLine;

    // Fonctions utilitaires
    function showNotification(message, type = 'success') {
      const notification = document.createElement('div');
      notification.className = `notification ${type === 'success' ? 'bg-green-600' : 'bg-red-600'} text-white`;
      notification.textContent = message;
      document.body.appendChild(notification);
      setTimeout(() => { notification.style.animation = 'slideIn 0.3s ease-out reverse'; setTimeout(() => notification.remove(), 300); }, 3000);
    }

    function showSyncIndicator(message = "ðŸ”„ Synchronisation...") {
      const existing = document.getElementById('syncIndicator');
      if (existing) existing.remove();

      const indicator = document.createElement('div');
      indicator.id = 'syncIndicator';
      indicator.className = 'fixed top-20 right-4 bg-blue-600 text-white px-4 py-2 rounded-lg shadow-lg z-50 flex items-center gap-2';
      indicator.innerHTML = `
        <div class="loading" style="width: 16px; height: 16px; border-width: 2px;"></div>
        <span class="text-sm">${message}</span>
      `;
      document.body.appendChild(indicator);

      setTimeout(() => indicator.remove(), 2000);
    }

    function showOfflineIndicator() {
      if (isOffline && isMechanicMode) {
        const indicator = document.createElement('div');
        indicator.className = 'offline-indicator';
        indicator.innerHTML = `âš ï¸ ${t('offlineMode')} - ${t('offlineMessage')}`;
        indicator.id = 'offlineIndicator';
        document.body.appendChild(indicator);
      } else {
        const indicator = document.getElementById('offlineIndicator');
        if (indicator) indicator.remove();
      }
    }

    function generateClientCode(targa) { return `${targa}-${new Date().getFullYear()}`; }
    function verifyClientCode(code) { /* Votre fonction */ }
    function getClientLink(targa) { /* Votre fonction */ }
    function validatePlate(targa) { /* Votre fonction */ }
    function validateEmail(email) { /* Votre fonction */ }
    function validatePhone(phone) { /* Votre fonction */ }
    function getReminders(targa) { /* Votre fonction */ }

    // Fonction pour synchroniser avec Firestore
    async function syncToFirestore(targa, vehicleData) {
      if (!USE_FIREBASE || !window.firebaseDB || !user) {
        console.error("Firebase non disponible ou utilisateur non connectÃ©");
        return;
      }
      try {
        await setDoc(doc(window.firebaseDB, 'vehicles', targa), vehicleData);
        console.log("DonnÃ©es synchronisÃ©es avec succÃ¨s");
      } catch (error) {
        console.error("Erreur lors de la synchronisation : ", error);
        showNotification('âš ï¸ Sync error, but saved locally', 'error');
        isOffline = true;
        showOfflineIndicator();
      }
    }

    // Fonction pour charger depuis Firestore
    async function loadFromFirestore(targa, enableRealtime = false) {
      if (!USE_FIREBASE || !window.firebaseDB || !user) {
        console.error("Firebase non disponible ou utilisateur non connectÃ©");
        return null;
      }
      try {
        if (enableRealtime) {
          if (realtimeUnsubscribe) realtimeUnsubscribe();

          realtimeUnsubscribe = onSnapshot(doc(window.firebaseDB, 'vehicles', targa), (docSnap) => {
            if (docSnap.exists()) {
              vehicles[targa] = docSnap.data();
              saveDataLocal();
              if (!showLoginScreen && currentVehicle === targa) {
                render();
                console.log("âœ… Intervention mise Ã  jour en temps rÃ©el!");
              }
            }
          }, (error) => {
            console.error("âŒ Erreur listener temps rÃ©el:", error);
            isOffline = true;
            showOfflineIndicator();
          });

          const docSnap = await getDoc(doc(window.firebaseDB, 'vehicles', targa));
          return docSnap.exists() ? docSnap.data() : null;
        } else {
          const docSnap = await getDoc(doc(window.firebaseDB, 'vehicles', targa));
          return docSnap.exists() ? docSnap.data() : null;
        }
      } catch (error) {
        isOffline = true;
        showOfflineIndicator();
        return null;
      }
    }

    // Fonction pour supprimer de Firestore
    async function deleteFromFirestore(targa) {
      if (!USE_FIREBASE || !window.firebaseDB || !user) {
        console.error("Firebase non disponible ou utilisateur non connectÃ©");
        return;
      }
      try {
        await deleteDoc(doc(window.firebaseDB, 'vehicles', targa));
      } catch (error) {
        console.error("Erreur lors de la suppression : ", error);
      }
    }

    // Fonction pour charger tous les vÃ©hicules depuis Firestore
    async function loadAllVehiclesFromFirestore() {
      if (!USE_FIREBASE || !window.firebaseDB || !user) {
        console.error("Firebase non disponible ou utilisateur non connectÃ©");
        loadDataLocal();
        return;
      }
      try {
        if (realtimeUnsubscribe) realtimeUnsubscribe();
        realtimeUnsubscribe = onSnapshot(collection(window.firebaseDB, 'vehicles'), (snapshot) => {
          snapshot.docChanges().forEach((change) => {
            const targa = change.doc.id;
            if (change.type === 'added' || change.type === 'modified') vehicles[targa] = change.doc.data();
            else if (change.type === 'removed') delete vehicles[targa];
          });
          saveDataLocal();
          if (!showLoginScreen) render();
        }, (error) => {
          isOffline = true;
          showOfflineIndicator();
          loadDataLocal();
        });
      } catch (error) {
        loadDataLocal();
      }
    }

    // Fonctions de stockage local
    function loadDataLocal() {
      try {
        const stored = localStorage.getItem('garage_vehicles');
        if (stored) vehicles = JSON.parse(stored);
      } catch (error) { vehicles = {}; }
    }

    function saveDataLocal() {
      try { localStorage.setItem('garage_vehicles', JSON.stringify(vehicles)); } catch (error) {}
    }

    // Fonction de connexion
    async function login() {
      const code = document.getElementById('loginCode').value.trim();
      if (!code) return showNotification(`âŒ ${t('invalidCode')}`, 'error');

      if (code === MECHANIC_PIN) {
        isMechanicMode = true;
        isClientMode = false;
        showLoginScreen = false;
        currentVehicle = null;
        showNotification(`âœ… ${t('mechanicAccess')}`);
        await loadAllVehiclesFromFirestore();
        render();
        return;
      }

      const parts = code.toUpperCase().split('-');
      if (parts.length >= 2) {
        const year = parts[parts.length - 1];
        const targa = parts.slice(0, -1).join('-');

        const vehicleData = await loadFromFirestore(targa, true);

        if (vehicleData) {
          vehicles[targa] = vehicleData;
          saveDataLocal();

          const currentYear = new Date().getFullYear().toString();
          const lastYear = (new Date().getFullYear() - 1).toString();

          if (year === currentYear || year === lastYear) {
            isClientMode = true;
            isMechanicMode = false;
            showLoginScreen = false;
            currentVehicle = targa;
            showNotification(`âœ… ${t('welcome')} - ${t('realtimeActive')}`);
            render();
            return;
          }
        }
      }

      showNotification(`âŒ ${t('invalidCode')}`, 'error');
    }

    // Fonction de dÃ©connexion
    function logout() {
      if (confirm(t('logoutConfirm'))) {
        if (realtimeUnsubscribe) { realtimeUnsubscribe(); realtimeUnsubscribe = null; }
        isMechanicMode = false; isClientMode = false; showLoginScreen = true; currentVehicle = null;
        showAddForm = false; searchQuery = ''; showAppointmentForm = false; showDashboard = false; showAdvancedSearch = false;
        showNotification(`ðŸ‘‹ ${t('disconnected')}`);
        signOut(auth).then(() => {
          console.log("Utilisateur dÃ©connectÃ©");
        }).catch((error) => {
          console.error("Erreur lors de la dÃ©connexion : ", error);
        });
        render();
      }
    }

    // Autres fonctions
    function updateModels() { /* Votre fonction */ }
    function handleModelChange() { /* Votre fonction */ }

    // Fonction pour ajouter un vÃ©hicule
    async function addVehicle() {
      if (!isMechanicMode || !user) return showNotification(`âŒ ${t('accessDenied')}`, 'error');

      const targa = document.getElementById('newVehicleTarga').value.toUpperCase().trim();
      const marca = document.getElementById('newVehicleMarca').value;
      let modello = document.getElementById('newVehicleModello').value;
      const otherModello = document.getElementById('otherModelInput').value.trim();

      const clienteNome = document.getElementById('clienteNome').value.trim();
      const clienteTelefono = document.getElementById('clienteTelefono').value.trim();
      const clienteEmail = document.getElementById('clienteEmail').value.trim();

      if (!targa) return showNotification(`âŒ ${t('plateRequired')}`, 'error');
      if (!validatePlate(targa)) return showNotification(`âŒ ${t('plateInvalid')}`, 'error');
      if (!marca) return showNotification(`âŒ ${t('brand')} ${t('required')}`, 'error');
      if (!modello) return showNotification(`âŒ ${t('model')} ${t('required')}`, 'error');
      if (!clienteNome) return showNotification(`âŒ ${t('clientName')} ${t('required')}`, 'error');
      if (clienteEmail && !validateEmail(clienteEmail)) return showNotification(`âŒ ${t('emailInvalid')}`, 'error');
      if (clienteTelefono && !validatePhone(clienteTelefono)) return showNotification(`âŒ ${t('phoneInvalid')}`, 'error');
      if (vehicles[targa]) return showNotification(`âŒ ${t('vehicleExists')}`, 'error');

      if (modello === 'other' && otherModello) {
        modello = otherModello;
      }

      const vehicleData = {
        targa,
        marca,
        modello,
        anno: document.getElementById('newVehicleAnno').value.trim(),
        chilometraggio: document.getElementById('newVehicleKm').value.trim(),
        cliente: {
          nome: clienteNome,
          telefono: clienteTelefono,
          email: clienteEmail
        },
        interventi: [],
        appuntamenti: [],
        clientCode: generateClientCode(targa),
        createdAt: new Date().toISOString(),
        tags: []
      };

      vehicles[targa] = vehicleData;
      saveDataLocal();

      ['newVehicleTarga', 'newVehicleAnno', 'newVehicleKm', 'clienteNome', 'clienteTelefono', 'clienteEmail'].forEach(id => {
        document.getElementById(id) && (document.getElementById(id).value = '');
      });

      showNotification(`âœ… ${t('vehicleAdded')}`);
      if (USE_FIREBASE) syncToFirestore(targa, vehicleData).catch(err => {});
      setTimeout(() => render(), 100);
    }

    // Autres fonctions
    async function addIntervento() { /* Votre fonction */ }
    async function deleteIntervento(id) { /* Votre fonction */ }
    async function deleteVehicle(targa) { /* Votre fonction */ }
    async function addAppointment() { /* Votre fonction */ }
    async function deleteAppointment(id) { /* Votre fonction */ }
    function openShareModal(targa) { /* Votre fonction */ }
    function copyLink(targa) { /* Votre fonction */ }
    function shareViaWhatsApp(targa) { /* Votre fonction */ }
    function shareViaEmail(targa) { /* Votre fonction */ }
    function updateSearch(q) { /* Votre fonction */ }
    function getFilteredVehicles() { /* Votre fonction */ }
    function getFilteredInterventions() { /* Votre fonction */ }
    function exportToExcel() { /* Votre fonction */ }
    function getVehicleStats(targa) { /* Votre fonction */ }
    function getStatistics() { /* Votre fonction */ }
    function generateInvoice(interventoId = null) { /* Votre fonction */ }
    function render() { /* Votre fonction */ }

    async function init() {
      loadDataLocal();
      const urlParams = new URLSearchParams(window.location.search);
      const code = urlParams.get('code');

      if (code) {
        const targa = verifyClientCode(code);
        if (targa) {
          isClientMode = true;
          isMechanicMode = false;
          showLoginScreen = false;
          currentVehicle = targa;
          window.history.replaceState({}, document.title, window.location.pathname);

          if (USE_FIREBASE) {
            if (!window.firebaseReady) {
              await new Promise(resolve => {
                window.addEventListener('firebaseReady', resolve, { once: true });
              });
            }

            console.log("ðŸ”„ Activation synchronisation temps rÃ©el pour client...");
            const vehicleData = await loadFromFirestore(targa, true);

            if (vehicleData) {
              vehicles[targa] = vehicleData;
              saveDataLocal();
              showNotification(`âœ… ${t('autoAccess')} - ${t('realtimeActive')}`);
            }
          }
        }
      }

      render();

      window.addEventListener('online', () => {
        isOffline = false;
        showOfflineIndicator();
        if (isClientMode && currentVehicle && USE_FIREBASE) {
          loadFromFirestore(currentVehicle, true);
        }
      });

      window.addEventListener('offline', () => {
        isOffline = true;
        showOfflineIndicator();
      });

      if (USE_FIREBASE && !code) {
        if (!window.firebaseReady) {
          await new Promise(resolve => {
            window.addEventListener('firebaseReady', resolve, { once: true });
          });
        }
      }
    }

    init();
  </script>
</body>
</html>
