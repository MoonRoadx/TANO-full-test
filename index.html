descriptionClient: "Brake pads need checking for your safety"
        },
        pneus: {
          name: "Tires",
          nameClient: "Tires",
          description: "Tire replacement",
          descriptionClient: "Tires might be worn, we recommend an inspection"
        },
        filtreAir: {
          name: "Air Filter",
          nameClient: "Air Filter",
          description: "Air filter replacement",
          descriptionClient: "Air filter needs replacement for better performance"
        },
        climatisation: {
          name: "Air Conditioning",
          nameClient: "Air Conditioning",
          description: "AC recharge",
          descriptionClient: "Air conditioning recharge recommended"
        },
        batterie: {
          name: "Battery",
          nameClient: "Battery",
          description: "Battery check/replacement",
          descriptionClient: "Battery might need replacement soon"
        }
      }
    };

    let currentLang = localStorage.getItem('app_language') || 'it';
    function t(key, subkey = null) {
      if (subkey) {
        return translations[currentLang][key]?.[subkey] || translations.it[key]?.[subkey] || key;
      }
      return translations[currentLang][key] || translations.it[key] || key;
    }
    function setLanguage(lang) { currentLang = lang; localStorage.setItem('app_language', lang); render(); }
    function getLanguageSelector() {
      return `<select onchange="setLanguage(this.value)" class="px-3 py-2 rounded-lg text-sm font-semibold bg-gray-700 text-white border-2 border-gray-600 hover:bg-gray-600 cursor-pointer" style="background-color: rgba(55,65,81,0.95) !important; color: white !important;">
        <option value="it" ${currentLang === 'it' ? 'selected' : ''}>üáÆüáπ Italiano</option>
        <option value="fr" ${currentLang === 'fr' ? 'selected' : ''}>üá´üá∑ Fran√ßais</option>
        <option value="en" ${currentLang === 'en' ? 'selected' : ''}>üá¨üáß English</option>
      </select>`;
    }

    let vehicles = {}, currentVehicle = null, showAddForm = false, isMechanicMode = false, isClientMode = false;
    let showLoginScreen = true, searchQuery = '', showShareModal = false, shareModalTarga = null, realtimeUnsubscribe = null;
    let showAlertsModal = false, isOffline = !navigator.onLine;

    function showNotification(message, type = 'success') {
      const notification = document.createElement('div');
      notification.className = `notification ${type === 'success' ? 'bg-green-600' : 'bg-red-600'} text-white`;
      notification.textContent = message;
      document.body.appendChild(notification);
      setTimeout(() => { notification.style.animation = 'slideIn 0.3s ease-out reverse'; setTimeout(() => notification.remove(), 300); }, 3000);
    }

    function generateClientCode(targa) { return `${targa}-${new Date().getFullYear()}`; }
    
    async function syncToFirestore(targa, vehicleData) {
      if (!USE_FIREBASE || !window.firebaseDB) return;
      try {
        const { setDoc, doc } = await import("https://www.gstatic.com/firebasejs/10.14.0/firebase-firestore.js");
        await setDoc(doc(window.firebaseDB, 'vehicles', targa), vehicleData);
      } catch (error) { 
        showNotification('‚ö†Ô∏è Sync error, but saved locally', 'error');
      }
    }

    async function loadFromFirestore(targa, enableRealtime = false) {
      if (!USE_FIREBASE || !window.firebaseDB) return null;
      try {
        const { getDoc, doc, onSnapshot } = await import("https://www.gstatic.com/firebasejs/10.14.0/firebase-firestore.js");
        
        if (enableRealtime) {
          if (realtimeUnsubscribe) realtimeUnsubscribe();
          
          realtimeUnsubscribe = onSnapshot(doc(window.firebaseDB, 'vehicles', targa), (docSnap) => {
            if (docSnap.exists()) {
              vehicles[targa] = docSnap.data();
              saveDataLocal();
              if (!showLoginScreen && currentVehicle === targa) {
                render();
              }
            }
          });
          
          const docSnap = await getDoc(doc(window.firebaseDB, 'vehicles', targa));
          return docSnap.exists() ? docSnap.data() : null;
        } else {
          const docSnap = await getDoc(doc(window.firebaseDB, 'vehicles', targa));
          return docSnap.exists() ? docSnap.data() : null;
        }
      } catch (error) { 
        return null;
      }
    }

    function loadDataLocal() {
      try {
        const stored = localStorage.getItem('garage_vehicles');
        if (stored) vehicles = JSON.parse(stored);
      } catch (error) { vehicles = {}; }
    }
    
    function saveDataLocal() {
      try { localStorage.setItem('garage_vehicles', JSON.stringify(vehicles)); } catch (error) {}
    }

    async function login() {
      const code = document.getElementById('loginCode').value.trim();
      if (!code) return showNotification(`‚ùå ${t('invalidCode')}`, 'error');
      
      if (code === MECHANIC_PIN) {
        isMechanicMode = true;
        isClientMode = false;
        showLoginScreen = false;
        currentVehicle = null;
        showNotification(`‚úÖ ${t('mechanicAccess')}`);
        render();
        return;
      }
      
      const parts = code.toUpperCase().split('-');
      if (parts.length >= 2) {
        const year = parts[parts.length - 1];
        const targa = parts.slice(0, -1).join('-');
        
        const vehicleData = await loadFromFirestore(targa, true);
        
        if (vehicleData) {
          vehicles[targa] = vehicleData;
          saveDataLocal();
          
          const currentYear = new Date().getFullYear().toString();
          const lastYear = (currentYear - 1).toString();
          
          if (year === currentYear || year === lastYear) {
            isClientMode = true;
            isMechanicMode = false;
            showLoginScreen = false;
            currentVehicle = targa;
            showNotification(`‚úÖ ${t('welcome')} - ${t('realtimeActive')}`);
            render();
            return;
          }
        }
      }
      
      showNotification(`‚ùå ${t('invalidCode')}`, 'error');
    }

    function logout() {
      if (confirm(t('logoutConfirm') || "Sei sicuro di voler uscire?")) {
        if (realtimeUnsubscribe) { realtimeUnsubscribe(); realtimeUnsubscribe = null; }
        isMechanicMode = false;
        isClientMode = false;
        showLoginScreen = true;
        currentVehicle = null;
        showAddForm = false;
        searchQuery = '';
        showNotification(`üëã ${t('disconnected')}`);
        render();
      }
    }

    async function addIntervento() {
      if (!isMechanicMode) return showNotification(`‚ùå Accesso negato`, 'error');
      
      const data = document.getElementById('interventoData').value;
      const tipo = document.getElementById('interventoTipo').value;
      const descrizione = document.getElementById('interventoDesc').value.trim();
      const ricambi = document.getElementById('interventoRicambi').value.trim();
      const costo = document.getElementById('interventoCosto').value;
      const km = document.getElementById('interventoKm').value;
      const meccanico = document.getElementById('interventoMeccanico').value.trim();
      const note = document.getElementById('interventoNote').value.trim();
      
      if (!tipo || !descrizione) {
        return showNotification(`‚ùå Tipo e descrizione obbligatori`, 'error');
      }
      
      const intervento = { 
        id: Date.now(), 
        data, 
        tipo, 
        descrizione, 
        ricambi, 
        costo, 
        chilometraggio: km, 
        meccanico, 
        note, 
        timestamp: new Date().toISOString() 
      };
      
      vehicles[currentVehicle].interventi.unshift(intervento);
      if (km) vehicles[currentVehicle].chilometraggio = km;
      saveDataLocal();
      
      try {
        await syncToFirestore(currentVehicle, vehicles[currentVehicle]);
        showNotification(`‚úÖ ${t('dataSaved')} - Cliente notificato`);
      } catch (error) {
        showNotification(`‚ö†Ô∏è Sauvegard√© localement`, 'error');
      }
      
      showAddForm = false;
      render();
    }

    // ========================================
    // üé® RENDU INTERFACE - MODAL ALERTES
    // ========================================
    
    function renderAlertsModal() {
      if (!currentVehicle || !vehicles[currentVehicle]) return '';
      
      const vehicle = vehicles[currentVehicle];
      const alerts = calculateAlerts(vehicle, isClientMode);
      const criticalCount = alerts.filter(a => a.urgency === 'critical').length;
      const highCount = alerts.filter(a => a.urgency === 'high').length;

      return `
        <div class="modal" onclick="if(event.target.classList.contains('modal')) { showAlertsModal=false; render(); }">
          <div class="modal-content" onclick="event.stopPropagation()">
            <div class="flex justify-between items-center mb-4">
              <h2 class="text-xl font-bold text-white flex items-center gap-2">
                üîî ${t('alerts')} - ${vehicle.targa}
              </h2>
              <button onclick="showAlertsModal=false; render();" class="text-white hover:text-red-400 text-4xl font-bold leading-none px-3" style="margin-top: -8px;">&times;</button>
            </div>

            ${alerts.length > 0 ? `
              <div class="mb-4 grid grid-cols-3 gap-2">
                ${criticalCount > 0 ? `
                  <div class="bg-red-900 bg-opacity-30 border border-red-500 rounded-lg p-2 text-center">
                    <div class="text-2xl font-bold text-red-400">${criticalCount}</div>
                    <div class="text-xs text-red-300">${t('urgent')}</div>
                  </div>
                ` : ''}
                ${highCount > 0 ? `
                  <div class="bg-orange-900 bg-opacity-30 border border-orange-500 rounded-lg p-2 text-center">
                    <div class="text-2xl font-bold text-orange-400">${highCount}</div>
                    <div class="text-xs text-orange-300">${t('important')}</div>
                  </div>
                ` : ''}
                <div class="bg-blue-900 bg-opacity-30 border border-blue-500 rounded-lg p-2 text-center">
                  <div class="text-2xl font-bold text-blue-400">${alerts.length}</div>
                  <div class="text-xs text-blue-300">${t('total')}</div>
                </div>
              </div>

              <div class="space-y-3 max-h-96 overflow-y-auto">
                ${alerts.map(alert => `
                  <div class="bg-gray-700 rounded-lg p-4 border-l-4 ${
                    alert.urgency === 'critical' ? 'border-red-500' :
                    alert.urgency === 'high' ? 'border-orange-500' :
                    alert.urgency === 'medium' ? 'border-yellow-500' : 'border-blue-500'
                  }">
                    <div class="flex items-start justify-between mb-2">
                      <div class="flex items-center gap-3">
                        <span class="text-3xl">${alert.icon}</span>
                        <div>
                          <h3 class="font-bold">${isClientMode ? t(alert.type, 'nameClient') : t(alert.type, 'name')}</h3>
                          <p class="text-xs text-gray-400">${isClientMode ? t(alert.type, 'descriptionClient') : t(alert.type, 'description')}</p>
                        </div>
                      </div>
                      <span class="px-2 py-1 rounded text-xs font-bold ${getUrgencyColor(alert.urgency)}">
                        ${getUrgencyLabel(alert.urgency)}
                      </span>
                    </div>
                    
                    <div class="mb-2">
                      <div class="flex items-center gap-2 text-sm mb-1">
                        <span>${alert.triggerType === 'km' ? 'üöó' : 'üìÖ'}</span>
                        <span class="font-bold">${alert.message}</span>
                      </div>
                      <div class="w-full bg-gray-600 rounded-full h-2">
                        <div class="h-full ${getUrgencyColor(alert.urgency)} rounded-full" style="width: ${alert.percentComplete}%"></div>
                      </div>
                    </div>
                  </div>
                `).join('')}
              </div>
            ` : `
              <div class="text-center py-8">
                <span class="text-6xl mb-4 block">‚úÖ</span>
                <h3 class="text-xl font-bold text-green-400 mb-2">${t('allOk')}</h3>
                <p class="text-gray-400">${t('noMaintenanceDue')}</p>
              </div>
            `}
            
            <button onclick="showAlertsModal=false; render();" class="w-full bg-blue-600 hover:bg-blue-700 text-white py-3 rounded-lg font-bold mt-4">
              ${t('close') || 'Chiudi'}
            </button>
          </div>
        </div>
      `;
    }

    function render() {
      const app = document.getElementById('app');
      
      // Afficher modal alertes si demand√©
      if (showAlertsModal) {
        app.innerHTML += renderAlertsModal();
        return;
      }

      if (showLoginScreen) {
        app.innerHTML = `
          <div class="min-h-screen flex items-center justify-center p-4">
            <div class="bg-white rounded-lg shadow-lg p-8 max-w-md w-full relative">
              <div class="absolute top-4 right-4">${getLanguageSelector()}</div>
              <img src="logo.png" alt="TANO Logo" class="h-24 w-24 mx-auto mb-6 object-contain" onerror="this.style.display='none'">
              <h1 class="text-3xl font-bold mb-2 text-center">${t('appName')}</h1>
              <p class="text-gray-400 mb-8 text-center">${t('appSubtitle')} ‚òÅÔ∏è</p>
              <div class="space-y-4">
                <div>
                  <label class="block text-sm font-semibold mb-2" style="color:#e5e7eb !important">${t('loginTitle')}</label>
                  <input type="text" id="loginCode" placeholder="${t('loginPlaceholder')}" class="w-full px-4 py-3 border-2 rounded-lg text-center text-xl font-bold uppercase" onkeypress="if(event.key==='Enter') login()" autofocus>
                </div>
                <button onclick="login()" class="w-full bg-blue-600 text-white py-4 rounded-lg font-semibold hover:bg-blue-700">üîì ${t('loginButton')}</button>
              </div>
            </div>
          </div>`;
        return;
      }

      if (!currentVehicle && isMechanicMode) {
        const vehiclesList = Object.values(vehicles);
        
        app.innerHTML = `
          <div class="min-h-screen">
            <div class="bg-blue-600 text-white p-4 shadow-lg">
              <div class="flex justify-between items-center">
                <div class="flex items-center gap-3">
                  <img src="logo.png" alt="TANO" class="h-12 w-12 object-contain rounded-lg bg-white p-1" onerror="this.style.display='none'">
                  <div>
                    <h1 class="text-2xl font-bold">${t('appName')}</h1>
                    <p class="text-xs text-blue-100">üîß ${t('mechanicMode')}</p>
                  </div>
                </div>
                <div class="flex items-center gap-2">
                  ${getLanguageSelector()}
                  <button onclick="logout()" class="px-3 py-2 bg-red-500 rounded hover:bg-red-600 text-sm">${t('logout')}</button>
                </div>
              </div>
            </div>
            
            <div class="p-4">
              <h2 class="text-xl font-bold mb-3 text-white">üöó ${t('vehicles')} (${vehiclesList.length})</h2>
              ${vehiclesList.length === 0 ? `
                <div class="bg-white rounded-lg shadow p-8 text-center text-gray-400">
                  <p>${t('noVehicles')}</p>
                </div>
              ` : `
                <div class="space-y-3">
                  ${vehiclesList.map(v => {
                    const alerts = calculateAlerts(v, false);
                    const criticalAlerts = alerts.filter(a => a.urgency === 'critical').length;
                    
                    return `<div class="bg-white rounded-lg shadow p-4">
                        <div class="flex justify-between items-center">
                          <div class="flex-1 cursor-pointer" onclick="currentVehicle='${v.targa}'; render();">
                            <div class="flex items-center gap-2">
                              <span class="text-xl font-bold">${v.targa}</span>
                              ${criticalAlerts > 0 ? `
                                <span class="bg-red-600 text-white px-2 py-1 rounded-full text-xs font-bold alert-pulse">
                                  ${criticalAlerts} ‚ö†Ô∏è
                                </span>
                              ` : ''}
                            </div>
                            <p class="text-gray-400">${v.marca || ''} ${v.modello || ''}</p>
                            ${v.chilometraggio ? `<p class="text-sm text-gray-500">üöó ${parseInt(v.chilometraggio).toLocaleString()} km</p>` : ''}
                          </div>
                        </div>
                      </div>`;
                  }).join('')}
                </div>
              `}
            </div>
          </div>`;
        return;
      }

      const vehicle = vehicles[currentVehicle];
      if (!vehicle) {
        app.innerHTML = `<div class="min-h-screen flex items-center justify-center"><div class="bg-white rounded-lg shadow p-8 text-center"><p class="text-gray-400 mb-4">Veicolo non trovato</p><button onclick="logout()" class="bg-blue-600 text-white px-6 py-2 rounded hover:bg-blue-700">${t('back')}</button></div></div>`;
        return;
      }

      if (!showAddForm) {
        const interventions = vehicle.interventi || [];
        const alerts = calculateAlerts(vehicle, isClientMode);
        const criticalCount = alerts.filter(a => a.urgency === 'critical').length;
        
        app.innerHTML = `
          <div class="min-h-screen">
            <div class="bg-blue-600 text-white p-4 shadow-lg">
              <div class="flex justify-between items-center mb-2">
                ${isMechanicMode ? `<button onclick="currentVehicle=null; render();" class="hover:bg-blue-700 px-3 py-2 rounded">‚Üê ${t('back')}</button>` : '<div></div>'}
                <div class="flex items-center gap-2">
                  ${getLanguageSelector()}
                  ${alerts.length > 0 ? `
                    <button onclick="showAlertsModal=true; render();" class="relative bg-orange-500 hover:bg-orange-600 px-4 py-2 rounded-lg font-semibold">
                      üîî ${t('viewAlerts')}
                      ${criticalCount > 0 ? `<span class="alert-badge">${criticalCount}</span>` : ''}
                    </button>
                  ` : ''}
                  <button onclick="logout()" class="px-3 py-2 bg-red-500 rounded hover:bg-red-600 text-sm">${t('logout')}</button>
                </div>
              </div>
              <div class="flex items-center gap-3">
                <img src="logo.png" alt="TANO" class="h-10 w-10 object-contain rounded-lg bg-white p-1" onerror="this.style.display='none'">
                <div>
                  <h1 class="text-2xl font-bold">${vehicle.targa}</h1>
                  <p class="text-blue-100">${vehicle.marca || ''} ${vehicle.modello || ''}</p>
                  ${vehicle.chilometraggio ? `<p class="text-sm text-blue-100">üöó ${parseInt(vehicle.chilometraggio).toLocaleString()} km</p>` : ''}
                  ${isClientMode ? `<div class="flex items-center gap-2 text-xs text-blue-100 mt-1">
                    <div class="w-2 h-2 rounded-full bg-green-400 animate-pulse"></div>
                    <span>‚òÅÔ∏è ${t('realtimeActive')}</span>
                  </div>` : ''}
                </div>
              </div>
            </div>
            
            ${alerts.length > 0 && isClientMode ? `
              <div class="p-4">
                <div class="bg-orange-900 bg-opacity-30 border-2 border-orange-500 rounded-lg p-4 mb-4 ${criticalCount > 0 ? 'alert-pulse' : ''}">
                  <div class="flex items-center justify-between">
                    <div class="flex items-center gap-3">
                      <span class="text-3xl">‚ö†Ô∏è</span>
                      <div>
                        <h3 class="font-bold text-lg">${criticalCount > 0 ? t('attention') : t('maintenanceDue')}</h3>
                        <p class="text-sm text-gray-300">${alerts.length} ${t('alerts').toLowerCase()}</p>
                      </div>
                    </div>
                    <button onclick="showAlertsModal=true; render();" class="bg-orange-500 hover:bg-orange-600 px-4 py-2 rounded-lg font-bold">
                      ${t('viewAlerts')} ‚Üí
                    </button>
                  </div>
                </div>
              </div>
            ` : ''}
            
            <div class="p-4">
              ${isMechanicMode ? `
                <button onclick="showAddForm=true; render();" class="w-full bg-green-600 text-white py-3 rounded-lg font-semibold hover:bg-green-700 mb-4">
                  ‚ûï ${t('newIntervention')}
                </button>
              ` : ''}
              
              <h2 class="text-xl font-bold mb-3 text-white">üìã ${t('history')} (${interventions.length})</h2>
              ${interventions.length === 0 ? `
                <div class="bg-white rounded-lg shadow p-8 text-center text-gray-400">
                  <p>${t('noInterventions')}</p>
                </div>
              ` : `
                <div class="space-y-3">
                  ${interventions.map(inter => `
                    <div class="bg-white rounded-lg shadow p-4">
                      <div class="flex justify-between items-start mb-2">
                        <div>
                          <div class="text-sm text-gray-400">üìÖ ${inter.data || t('date')}</div>
                          <h3 class="font-bold text-lg text-blue-400">${inter.tipo}</h3>
                        </div>
                      </div>
                      <p class="text-gray-300 mb-2">${inter.descrizione}</p>
                      ${inter.ricambi ? `<div class="text-sm text-gray-400 mb-1"><span class="font-semibold">üîß ${t('parts')}:</span> ${inter.ricambi}</div>` : ''}
                      <div class="flex flex-wrap gap-3 mt-2 text-sm">
                        ${inter.costo ? `<div class="text-green-400 font-semibold">üí∞ ‚Ç¨${inter.costo}</div>` : ''}
                        ${inter.chilometraggio ? `<div class="text-gray-400 font-semibold">üöó ${parseInt(inter.chilometraggio).toLocaleString()} km</div>` : ''}
                      </div>
                    </div>
                  `).join('')}
                </div>
              `}
            </div>
          </div>`;
      } else {
        const today = new Date().toISOString().split('T')[0];
        app.innerHTML = `
          <div class="min-h-screen">
            <div class="bg-blue-600 text-white p-4 shadow-lg">
              <div class="flex items-center gap-3">
                <img src="logo.png" alt="TANO" class="h-10 w-10 object-contain rounded-lg bg-white p-1" onerror="this.style.display='none'">
                <div><h1 class="text-xl font-bold">${vehicle.targa}</h1><p class="text-blue-100">‚ûï ${t('newIntervention')}</p></div>
              </div>
            </div>
            <div class="p-4">
              <div class="bg-white rounded-lg shadow p-4">
                <div class="space-y-3">
                  <div><label class="block text-sm font-semibold mb-1">üìÖ ${t('date')} *</label><input type="date" id="interventoData" value="${today}" class="w-full px-3 py-2 border rounded"></div>
                  <div><label class="block text-sm font-semibold mb-1">üîß ${t('type')} *</label>
                    <select id="interventoTipo" class="w-full px-3 py-2 border rounded">
                      <option value="">Seleziona...</option>
                      <option value="${t('serviceOilChange')}">${t('serviceOilChange')}</option>
                      <option value="${t('serviceRepair')}">${t('serviceRepair')}</option>
                      <option value="${t('serviceInspection')}">${t('serviceInspection')}</option>
                      <option value="${t('serviceTires')}">${t('serviceTires')}</option>
                      <option value="${t('serviceOther')}">${t('serviceOther')}</option>
                    </select>
                  </div>
                  <div><label class="block text-sm font-semibold mb-1">üìù ${t('description')} *</label><textarea id="interventoDesc" rows="3" class="w-full px-3 py-2 border rounded"></textarea></div>
                  <div><label class="block text-sm font-semibold mb-1">üî© ${t('parts')}</label><input type="text" id="interventoRicambi" class="w-full px-3 py-2 border rounded"></div>
                  <div class="grid grid-cols-2 gap-3">
                    <div><label class="block text-sm font-semibold mb-1">üí∞ ${t('cost')} (‚Ç¨)</label><input type="number" id="interventoCosto" step="0.01" class="w-full px-3 py-2 border rounded"></div>
                    <div><label class="block text-sm font-semibold mb-1">üöó ${t('mileage')}</label><input type="number" id="interventoKm" value="${vehicle.chilometraggio || ''}" class="w-full px-3 py-2 border rounded"></div>
                  </div>
                  <div><label class="block text-sm font-semibold mb-1">üë§ ${t('mechanic')}</label><input type="text" id="interventoMeccanico" class="w-full px-3 py-2 border rounded"></div>
                  <div><label class="block text-sm font-semibold mb-1">üí¨ ${t('notes')}</label><textarea id="interventoNote" rows="3" class="w-full px-3 py-2 border rounded"></textarea></div>
                  
                  <div class="flex gap-2 pt-2">
                    <button onclick="addIntervento()" class="flex-1 bg-green-600 text-white py-3 rounded-lg font-semibold hover:bg-green-700">‚úÖ ${t('save')}</button>
                    <button onclick="showAddForm=false; render();" class="flex-1 bg-gray-600 text-white py-3 rounded-lg font-semibold hover:bg-gray-700">‚ùå ${t('cancel')}</button>
                  </div>
                </div>
              </div>
            </div>
          </div>`;
      }
    }

    async function init() {
      loadDataLocal();
      const urlParams = new URLSearchParams(window.location.search);
      const code = urlParams.get('code');
      
      if (code) {
        const parts = code.toUpperCase().split('-');
        if (parts.length >= 2) {
          const targa = parts.slice(0, -1).join('-');
          
          if (USE_FIREBASE) {
            if (!window.firebaseReady) {
              await new Promise(resolve => {
                window.addEventListener('firebaseReady', resolve, { once: true });
              });
            }
            
            console.log("üîÑ Activation synchronisation temps r√©el pour client...");
            const vehicleData = await loadFromFirestore(targa, true);
            
            if (vehicleData) {
              vehicles[targa] = vehicleData;
              saveDataLocal();
              
              const year = parts[parts.length - 1];
              const currentYear = new Date().getFullYear().toString();
              const lastYear = (currentYear - 1).toString();
              
              if (year === currentYear || year === lastYear) {
                isClientMode = true;
                isMechanicMode = false;
                showLoginScreen = false;
                currentVehicle = targa;
                showNotification(`‚úÖ Accesso automatico - Sync attiva`);
              }
            }
          }
        }
      }
      
      render();
      
      window.addEventListener('online', () => {
        isOffline = false;
        if (isClientMode && currentVehicle && USE_FIREBASE) {
          loadFromFirestore(currentVehicle, true);
        }
      });
      
      window.addEventListener('offline', () => {
        isOffline = true;
      });
    }

    init();
  </script>
</body>
</html><!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <meta name="description" content="Sistema di tracciamento interventi meccanici con alertes intelligenti - Tano Evoluzione"/>
  <title>Tano Evoluzione v2.0 - Sistema NFC + Alertes</title>

  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.31/jspdf.plugin.autotable.min.js"></script>

  <style>
    html, body { height: 100%; margin: 0; }
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: url('Background.png') no-repeat center center fixed;
      background-size: cover;
      color: white;
      min-height: 100vh;
      opacity: 0;
      animation: fadeIn 1s ease-in-out forwards;
    }
    body::before {
      content: "";
      position: fixed;
      inset: 0;
      background: linear-gradient(135deg, rgba(0,0,0,0.85) 0%, rgba(0,0,0,0.65) 50%, rgba(0,0,0,0.85) 100%);
      backdrop-filter: blur(2px);
      z-index: -1;
    }
    #app { background: rgba(0,0,0,0.45); min-height: 100vh; padding-bottom: 50px; }
    .bg-white {
      background-color: rgba(30,30,35,0.88) !important;
      backdrop-filter: blur(12px) saturate(120%);
      border: 1px solid rgba(255,255,255,0.15);
      box-shadow: 0 8px 32px rgba(0,0,0,0.5);
      transition: all 0.4s ease;
    }
    .bg-white p, .bg-white span, .bg-white h2, .bg-white h3 { color: #e5e7eb !important; }
    .text-gray-600, .text-gray-500, .text-gray-700 { color: #d1d5db !important; }
    .text-blue-600 { color: #60a5fa !important; }
    input, textarea, select {
      color: #f3f4f6 !important;
      background-color: rgba(45,45,50,0.95) !important;
      border: 2px solid rgba(75,85,99,0.8) !important;
    }
    input::placeholder, textarea::placeholder { color: #9ca3af !important; }
    input:focus, textarea:focus, select:focus {
      outline: none; box-shadow: 0 0 0 4px rgba(59,130,246,0.3); border-color: #3b82f6 !important;
    }
    @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
    @keyframes pulse-alert { 0%, 100% { opacity: 1; transform: scale(1); } 50% { opacity: 0.8; transform: scale(1.05); } }
    .animate-pulse { animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite; }
    .alert-pulse { animation: pulse-alert 2s cubic-bezier(0.4, 0, 0.6, 1) infinite; }
    .notification {
      position: fixed; top: 20px; right: 20px; padding: 16px 24px; border-radius: 8px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.3); z-index: 1000; animation: slideIn 0.3s ease-out;
    }
    @keyframes slideIn { from { transform: translateX(400px); opacity: 0; } to { transform: translateX(0); opacity: 1; } }
    .modal { position: fixed; inset: 0; background: rgba(0,0,0,0.8); display: flex; align-items: center; justify-content: center; z-index: 2000; padding: 20px; }
    .modal-content { background: rgba(30,30,35,0.95); border-radius: 12px; padding: 24px; max-width: 500px; width: 100%; border: 1px solid rgba(255,255,255,0.15); max-height: 90vh; overflow-y: auto; }
    #qrcode { display: flex; justify-content: center; padding: 20px; background: white; border-radius: 8px; margin: 16px 0; }
    .loading {
      display: inline-block; width: 20px; height: 20px; border: 3px solid rgba(255,255,255,.3);
      border-radius: 50%; border-top-color: #fff; animation: spin 1s ease-in-out infinite;
    }
    @keyframes spin { to { transform: rotate(360deg); } }
    .pdf-button {
      background: linear-gradient(135deg, #dc2626 0%, #991b1b 100%);
      transition: all 0.3s ease;
    }
    .pdf-button:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(220, 38, 38, 0.4);
    }
    .offline-indicator {
      position: fixed; bottom: 20px; left: 20px; padding: 12px 20px; background: rgba(245, 158, 11, 0.9);
      color: white; border-radius: 8px; font-weight: bold; z-index: 1001; animation: slideUp 0.3s ease-out;
    }
    @keyframes slideUp { from { transform: translateY(100px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
    .tag {
      display: inline-block; padding: 4px 8px; border-radius: 4px; font-size: 11px; font-weight: bold; margin-right: 5px; margin-bottom: 5px;
    }
    .tag-urgent { background: #dc2626; color: white; }
    .tag-warranty { background: #059669; color: white; }
    .tag-recurring { background: #2563eb; color: white; }
    .tag-parts { background: #7c3aed; color: white; }
    
    /* Badge d'alerte */
    .alert-badge {
      position: absolute;
      top: -8px;
      right: -8px;
      background: #dc2626;
      color: white;
      border-radius: 50%;
      width: 24px;
      height: 24px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 12px;
      font-weight: bold;
      animation: pulse-alert 2s infinite;
    }
  </style>
</head>
<body>
  <div id="app">
    <div class="min-h-screen flex items-center justify-center">
      <div class="bg-white rounded-lg shadow-lg p-8 max-w-md w-full text-center">
        <div class="loading mx-auto mb-4"></div>
        <p class="text-gray-300">Caricamento sistema...</p>
      </div>
    </div>
  </div>

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.14.0/firebase-app.js";
    import { getFirestore, enableIndexedDbPersistence } from "https://www.gstatic.com/firebasejs/10.14.0/firebase-firestore.js";

    const firebaseConfig = {
      apiKey: "AIzaSyBiU0Q_xfHBLlGHh0vbeZpBAc1uoRz554",
      authDomain: "tano-client-serveur.firebaseapp.com",
      projectId: "tano-client-serveur",
      storageBucket: "tano-client-serveur.firebasestorage.app",
      messagingSenderId: "83806701673",
      appId: "1:83806701673:web:6e44a0ebd99ea0a75cfaf8"
    };

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);
    
    try {
      await enableIndexedDbPersistence(db);
      console.log("‚úÖ Mode hors ligne activ√©");
    } catch (err) {
      console.log("‚ö†Ô∏è Erreur persistance:", err.code);
    }
    
    window.firebaseDB = db;
    window.firebaseReady = true;
    console.log("‚úÖ Firebase initialized");
    window.dispatchEvent(new Event('firebaseReady'));
  </script>

  <script>
    const MECHANIC_PIN = "1234";
    const USE_FIREBASE = true;

    // ========================================
    // üîß R√àGLES D'ALERTES MAINTENANCE
    // ========================================
    
    const MAINTENANCE_RULES = {
      tagliando: {
        kmInterval: 15000,
        monthsInterval: 12,
        kmWarningThreshold: 2000,
        daysWarningThreshold: 60,
        icon: "üõ¢Ô∏è",
        urgency: "high",
        visibleToClient: true,
        category: "maintenance"
      },
      courroie: {
        kmInterval: 100000,
        monthsInterval: 60,
        kmWarningThreshold: 5000,
        daysWarningThreshold: 180,
        icon: "‚öôÔ∏è",
        urgency: "critical",
        visibleToClient: true,
        category: "critical"
      },
      plaquettes: {
        kmInterval: 40000,
        monthsInterval: null,
        kmWarningThreshold: 3000,
        daysWarningThreshold: null,
        icon: "üî¥",
        urgency: "high",
        visibleToClient: true,
        category: "safety"
      },
      pneus: {
        kmInterval: 50000,
        monthsInterval: 48,
        kmWarningThreshold: 5000,
        daysWarningThreshold: 90,
        icon: "üõû",
        urgency: "medium",
        visibleToClient: true,
        category: "safety"
      },
      filtreAir: {
        kmInterval: 30000,
        monthsInterval: 24,
        kmWarningThreshold: 2000,
        daysWarningThreshold: 60,
        icon: "üí®",
        urgency: "low",
        visibleToClient: false,
        category: "maintenance"
      },
      climatisation: {
        kmInterval: null,
        monthsInterval: 24,
        kmWarningThreshold: null,
        daysWarningThreshold: 60,
        icon: "‚ùÑÔ∏è",
        urgency: "low",
        visibleToClient: false,
        category: "comfort"
      },
      batterie: {
        kmInterval: null,
        monthsInterval: 48,
        kmWarningThreshold: null,
        daysWarningThreshold: 90,
        icon: "üîã",
        urgency: "medium",
        visibleToClient: true,
        category: "maintenance"
      }
    };

    // ========================================
    // üßÆ CALCUL DES ALERTES
    // ========================================
    
    function calculateAlerts(vehicle, forClient = false) {
      if (!vehicle || !vehicle.interventi) return [];
      
      const alerts = [];
      const today = new Date();

      Object.entries(MAINTENANCE_RULES).forEach(([key, rule]) => {
        if (forClient && !rule.visibleToClient) return;

        let alert = null;

        // V√©rification kilom√©trage
        if (rule.kmInterval && vehicle.chilometraggio) {
          const lastMaintenance = vehicle.interventi
            .filter(i => i.tipo === key || i.tipo === t(key, 'nameClient') || i.tipo === t(key, 'name'))
            .sort((a, b) => (b.chilometraggio || 0) - (a.chilometraggio || 0))[0];

          const kmSinceLast = lastMaintenance 
            ? parseInt(vehicle.chilometraggio) - parseInt(lastMaintenance.chilometraggio || 0)
            : parseInt(vehicle.chilometraggio);

          const kmRemaining = rule.kmInterval - kmSinceLast;
          const percentComplete = (kmSinceLast / rule.kmInterval) * 100;

          if (kmRemaining <= rule.kmWarningThreshold) {
            alert = {
              type: key,
              category: rule.category,
              icon: rule.icon,
              triggerType: 'km',
              message: `${t('remaining')}: ${kmRemaining} ${t('km')}`,
              kmRemaining: kmRemaining,
              urgency: kmRemaining <= 500 ? 'critical' : kmRemaining <= 1000 ? 'high' : rule.urgency,
              percentComplete: Math.min(Math.max(percentComplete, 0), 100),
              dueKm: lastMaintenance ? (parseInt(lastMaintenance.chilometraggio) + rule.kmInterval) : rule.kmInterval,
              currentKm: parseInt(vehicle.chilometraggio),
              lastMaintenance: lastMaintenance
            };
          }
        }

        // V√©rification dates
        if (rule.monthsInterval) {
          const lastMaintenance = vehicle.interventi
            .filter(i => i.tipo === key || i.tipo === t(key, 'nameClient') || i.tipo === t(key, 'name'))
            .sort((a, b) => new Date(b.data) - new Date(a.data))[0];

          const referenceDate = lastMaintenance 
            ? new Date(lastMaintenance.data)
            : vehicle.createdAt ? new Date(vehicle.createdAt) : new Date(vehicle.anno || new Date().getFullYear(), 0, 1);

          const dueDate = new Date(referenceDate);
          dueDate.setMonth(dueDate.getMonth() + rule.monthsInterval);

          const daysRemaining = Math.floor((dueDate - today) / (1000 * 60 * 60 * 24));
          
          if (daysRemaining <= rule.daysWarningThreshold) {
            const totalDays = rule.monthsInterval * 30;
            const daysPassed = totalDays - daysRemaining;
            const percentComplete = (daysPassed / totalDays) * 100;

            const dateAlert = {
              type: key,
              category: rule.category,
              icon: rule.icon,
              triggerType: 'date',
              message: daysRemaining > 0 
                ? `${t('remaining')}: ${daysRemaining} ${t('days')}` 
                : `${t('expired')} ${Math.abs(daysRemaining)} ${t('days')}`,
              daysRemaining: daysRemaining,
              urgency: daysRemaining <= 0 ? 'critical' : daysRemaining <= 30 ? 'high' : rule.urgency,
              percentComplete: Math.min(Math.max(percentComplete, 0), 100),
              dueDate: dueDate.toISOString().split('T')[0],
              lastMaintenance: lastMaintenance
            };

            if (alert) {
              const urgencyOrder = { critical: 0, high: 1, medium: 2, low: 3 };
              if (urgencyOrder[dateAlert.urgency] < urgencyOrder[alert.urgency]) {
                alert = dateAlert;
              }
            } else {
              alert = dateAlert;
            }
          }
        }

        if (alert) alerts.push(alert);
      });

      return alerts.sort((a, b) => {
        const urgencyOrder = { critical: 0, high: 1, medium: 2, low: 3 };
        return urgencyOrder[a.urgency] - urgencyOrder[b.urgency];
      });
    }

    function getUrgencyColor(urgency) {
      switch (urgency) {
        case 'critical': return 'bg-red-600';
        case 'high': return 'bg-orange-500';
        case 'medium': return 'bg-yellow-500';
        case 'low': return 'bg-blue-500';
        default: return 'bg-gray-500';
      }
    }

    function getUrgencyLabel(urgency) {
      switch (urgency) {
        case 'critical': return `‚ö†Ô∏è ${t('urgentLabel')}`;
        case 'high': return `üîî ${t('highLabel')}`;
        case 'medium': return `‚ö° ${t('mediumLabel')}`;
        case 'low': return `‚ÑπÔ∏è ${t('lowLabel')}`;
        default: return '';
      }
    }

    // Reste du code TANO v1.8...
    // (Je vais continuer avec les traductions et l'int√©gration)
    
    const translations = {
      it: {
        // Nouveaux textes pour alertes
        alerts: "Alertas",
        viewAlerts: "Vedi Alertas",
        maintenanceDue: "Manutenzioni in Scadenza",
        attention: "Attenzione!",
        urgentNeeded: "Interventi urgenti necessari",
        checkRecommended: "Controlla le manutenzioni consigliate",
        allOk: "Tutto OK!",
        noMaintenanceDue: "Nessuna manutenzione in scadenza",
        urgent: "Urgenti",
        important: "Importanti",
        total: "Totali",
        urgentLabel: "URGENTE",
        highLabel: "IMPORTANTE",
        mediumLabel: "DA FARE",
        lowLabel: "CONSIGLIATO",
        remaining: "Rimanenti",
        expired: "Scaduto da",
        days: "giorni",
        km: "km",
        
        // Textes existants
        appName: "Tano Evoluzione",
        appSubtitle: "Bosch car Service",
        loginTitle: "Inserisci il codice:",
        loginPlaceholder: "Codice Meccanico o Cliente",
        loginButton: "Accedi",
        mechanicMode: "Modo Meccanico",
        clientMode: "Modalit√† Cliente - Solo Lettura",
        logout: "Esci",
        back: "Indietro",
        newVehicle: "Nuovo Veicolo",
        addVehicle: "Aggiungi Veicolo",
        plate: "Targa",
        brand: "Marca",
        model: "Modello",
        year: "Anno",
        mileage: "Chilometraggio",
        vehicles: "Veicoli",
        noVehicles: "Nessun veicolo registrato",
        search: "Cerca veicolo...",
        history: "Storico",
        noInterventions: "Nessun intervento registrato",
        newIntervention: "Nuovo Intervento",
        date: "Data",
        type: "Tipo",
        description: "Descrizione",
        parts: "Ricambi",
        cost: "Costo",
        mechanic: "Meccanico",
        notes: "Note",
        save: "Salva",
        cancel: "Annulla",
        interventions: "interventi",
        clientName: "Nome cliente",
        clientPhone: "Telefono",
        clientEmail: "Email",
        selectBrand: "Seleziona Marca",
        selectModel: "Seleziona Modello",
        serviceOilChange: "Tagliando",
        serviceRepair: "Riparazione",
        serviceInspection: "Revisione",
        serviceTires: "Cambio gomme",
        serviceOther: "Altro",
        realtimeActive: "Sincronizzazione tempo reale attiva",
        
        // Types de maintenance pour alertes
        tagliando: {
          name: "Tagliando / Vidange",
          nameClient: "Tagliando Motore",
          description: "Cambio olio motore e filtri",
          descriptionClient: "√à tempo del tagliando! Prenota per mantenere il motore in salute"
        },
        courroie: {
          name: "Cinghia Distribuzione",
          nameClient: "Cinghia Distribuzione",
          description: "Sostituzione cinghia distribuzione (critico)",
          descriptionClient: "Importante: la cinghia deve essere sostituita per evitare danni gravi"
        },
        plaquettes: {
          name: "Pastiglie Freni",
          nameClient: "Freni",
          description: "Sostituzione pastiglie freni",
          descriptionClient: "Le pastiglie freni sono da controllare per la tua sicurezza"
        },
        pneus: {
          name: "Pneumatici",
          nameClient: "Pneumatici",
          description: "Sostituzione pneumatici",
          descriptionClient: "Gli pneumatici potrebbero essere consumati, consigliamo un controllo"
        },
        filtreAir: {
          name: "Filtro Aria",
          nameClient: "Filtro Aria",
          description: "Sostituzione filtro aria",
          descriptionClient: "Filtro aria da sostituire per migliori prestazioni"
        },
        climatisation: {
          name: "Climatizzazione",
          nameClient: "Aria Condizionata",
          description: "Ricarica climatizzatore",
          descriptionClient: "Ricarica aria condizionata consigliata"
        },
        batterie: {
          name: "Batteria",
          nameClient: "Batteria",
          description: "Controllo/sostituzione batteria",
          descriptionClient: "La batteria potrebbe essere da sostituire presto"
        }
      },
      fr: {
        // Nouveaux textes pour alertes
        alerts: "Alertes",
        viewAlerts: "Voir Alertes",
        maintenanceDue: "Entretiens √† Pr√©voir",
        attention: "Attention !",
        urgentNeeded: "Interventions urgentes n√©cessaires",
        checkRecommended: "V√©rifiez les entretiens recommand√©s",
        allOk: "Tout est OK !",
        noMaintenanceDue: "Aucun entretien pr√©vu",
        urgent: "Urgents",
        important: "Importants",
        total: "Total",
        urgentLabel: "URGENT",
        highLabel: "IMPORTANT",
        mediumLabel: "√Ä FAIRE",
        lowLabel: "CONSEILL√â",
        remaining: "Restants",
        expired: "Expir√© depuis",
        days: "jours",
        km: "km",
        
        // Textes existants
        appName: "Tano Evoluzione",
        appSubtitle: "Bosch car Service",
        loginTitle: "Entrez le code:",
        loginPlaceholder: "Code M√©canicien ou Client",
        loginButton: "Connexion",
        mechanicMode: "Mode M√©canicien",
        clientMode: "Mode Client - Lecture seule",
        logout: "D√©connexion",
        back: "Retour",
        newVehicle: "Nouveau V√©hicule",
        addVehicle: "Ajouter un V√©hicule",
        plate: "Plaque",
        brand: "Marque",
        model: "Mod√®le",
        year: "Ann√©e",
        mileage: "Kilom√©trage",
        vehicles: "V√©hicules",
        noVehicles: "Aucun v√©hicule enregistr√©",
        search: "Rechercher un v√©hicule...",
        history: "Historique",
        noInterventions: "Aucune intervention enregistr√©e",
        newIntervention: "Nouvelle Intervention",
        date: "Date",
        type: "Type",
        description: "Description",
        parts: "Pi√®ces",
        cost: "Co√ªt",
        mechanic: "M√©canicien",
        notes: "Notes",
        save: "Enregistrer",
        cancel: "Annuler",
        interventions: "interventions",
        clientName: "Nom client",
        clientPhone: "T√©l√©phone",
        clientEmail: "Email",
        selectBrand: "S√©lectionner Marque",
        selectModel: "S√©lectionner Mod√®le",
        serviceOilChange: "Vidange",
        serviceRepair: "R√©paration",
        serviceInspection: "R√©vision",
        serviceTires: "Changement pneus",
        serviceOther: "Autre",
        realtimeActive: "Synchronisation temps r√©el active",
        
        // Types de maintenance
        tagliando: {
          name: "Vidange / R√©vision",
          nameClient: "Vidange Moteur",
          description: "Changement huile moteur et filtres",
          descriptionClient: "C'est l'heure de la vidange ! R√©servez pour garder votre moteur en sant√©"
        },
        courroie: {
          name: "Courroie Distribution",
          nameClient: "Courroie Distribution",
          description: "Remplacement courroie distribution (critique)",
          descriptionClient: "Important : la courroie doit √™tre remplac√©e pour √©viter des dommages graves"
        },
        plaquettes: {
          name: "Plaquettes de Frein",
          nameClient: "Freins",
          description: "Remplacement plaquettes de frein",
          descriptionClient: "Les plaquettes de frein sont √† contr√¥ler pour votre s√©curit√©"
        },
        pneus: {
          name: "Pneumatiques",
          nameClient: "Pneus",
          description: "Remplacement des pneus",
          descriptionClient: "Les pneus pourraient √™tre us√©s, nous recommandons un contr√¥le"
        },
        filtreAir: {
          name: "Filtre √† Air",
          nameClient: "Filtre √† Air",
          description: "Remplacement filtre √† air",
          descriptionClient: "Filtre √† air √† remplacer pour de meilleures performances"
        },
        climatisation: {
          name: "Climatisation",
          nameClient: "Climatisation",
          description: "Recharge climatisation",
          descriptionClient: "Recharge de la climatisation recommand√©e"
        },
        batterie: {
          name: "Batterie",
          nameClient: "Batterie",
          description: "Contr√¥le/remplacement batterie",
          descriptionClient: "La batterie pourrait devoir √™tre remplac√©e bient√¥t"
        }
      },
      en: {
        // Nouveaux textes pour alertes
        alerts: "Alerts",
        viewAlerts: "View Alerts",
        maintenanceDue: "Upcoming Maintenance",
        attention: "Attention!",
        urgentNeeded: "Urgent interventions needed",
        checkRecommended: "Check recommended maintenance",
        allOk: "All OK!",
        noMaintenanceDue: "No maintenance due",
        urgent: "Urgent",
        important: "Important",
        total: "Total",
        urgentLabel: "URGENT",
        highLabel: "IMPORTANT",
        mediumLabel: "TO DO",
        lowLabel: "RECOMMENDED",
        remaining: "Remaining",
        expired: "Expired since",
        days: "days",
        km: "km",
        
        // Textes existants
        appName: "Tano Evoluzione",
        appSubtitle: "Bosch car Service",
        loginTitle: "Enter the code:",
        loginPlaceholder: "Mechanic or Client Code",
        loginButton: "Login",
        mechanicMode: "Mechanic Mode",
        clientMode: "Client Mode - Read Only",
        logout: "Logout",
        back: "Back",
        newVehicle: "New Vehicle",
        addVehicle: "Add Vehicle",
        plate: "Plate",
        brand: "Brand",
        model: "Model",
        year: "Year",
        mileage: "Mileage",
        vehicles: "Vehicles",
        noVehicles: "No vehicles registered",
        search: "Search vehicle...",
        history: "History",
        noInterventions: "No interventions registered",
        newIntervention: "New Intervention",
        date: "Date",
        type: "Type",
        description: "Description",
        parts: "Parts",
        cost: "Cost",
        mechanic: "Mechanic",
        notes: "Notes",
        save: "Save",
        cancel: "Cancel",
        interventions: "interventions",
        clientName: "Client name",
        clientPhone: "Phone",
        clientEmail: "Email",
        selectBrand: "Select Brand",
        selectModel: "Select Model",
        serviceOilChange: "Oil Change",
        serviceRepair: "Repair",
        serviceInspection: "Inspection",
        serviceTires: "Tire Change",
        serviceOther: "Other",
        realtimeActive: "Real-time sync active",
        
        // Types de maintenance
        tagliando: {
          name: "Oil Change / Service",
          nameClient: "Oil Change",
          description: "Engine oil and filter change",
          descriptionClient: "Time for an oil change! Book now to keep your engine healthy"
        },
        courroie: {
          name: "Timing Belt",
          nameClient: "Timing Belt",
          description: "Timing belt replacement (critical)",
          descriptionClient: "Important: the belt must be replaced to avoid serious damage"
        },
        plaquettes: {
          name: "Brake Pads",
          nameClient: "Brakes",
          description: "Brake pad replacement",
          descriptionClient: "Brake pads
